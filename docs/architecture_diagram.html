<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WikiStream Pipeline Architecture</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Amazon Ember', 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            min-height: 100vh;
            padding: 20px;
            color: #e4e4e4;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        h1 {
            text-align: center;
            font-size: 2.2rem;
            margin-bottom: 10px;
            color: #ff9900;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        .subtitle {
            text-align: center;
            color: #8ecae6;
            margin-bottom: 30px;
            font-size: 1.1rem;
        }
        .diagram-container {
            background: #ffffff;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.4);
            margin-bottom: 30px;
        }
        .legend {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }
        .legend-section {
            background: rgba(255,255,255,0.05);
            border: 1px solid rgba(255,153,0,0.3);
            border-radius: 8px;
            padding: 20px;
        }
        .legend-section h3 {
            color: #ff9900;
            margin-bottom: 15px;
            font-size: 1.1rem;
            border-bottom: 1px solid rgba(255,153,0,0.3);
            padding-bottom: 8px;
        }
        .legend-item {
            display: flex;
            align-items: flex-start;
            margin-bottom: 12px;
            font-size: 0.9rem;
        }
        .legend-item .icon {
            min-width: 24px;
            margin-right: 10px;
            font-size: 1.1rem;
        }
        .status {
            display: inline-block;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 0.75rem;
            font-weight: bold;
            margin-left: 5px;
        }
        .status-live { background: #2ecc71; color: #000; }
        .status-implemented { background: #3498db; color: #fff; }
        .status-auto { background: #9b59b6; color: #fff; }
        .status-dq { background: #e74c3c; color: #fff; }
        .tech-stack {
            background: rgba(255,255,255,0.03);
            border-radius: 8px;
            padding: 20px;
            margin-top: 30px;
        }
        .tech-stack h3 {
            color: #ff9900;
            margin-bottom: 15px;
        }
        .tech-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }
        .tech-item {
            background: rgba(255,153,0,0.1);
            border: 1px solid rgba(255,153,0,0.2);
            border-radius: 6px;
            padding: 12px;
        }
        .tech-item strong {
            color: #ff9900;
            display: block;
            margin-bottom: 5px;
        }
        .tech-item span {
            font-size: 0.85rem;
            color: #bbb;
        }
        .mermaid {
            display: flex;
            justify-content: center;
        }
        .metrics {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 15px;
            margin-top: 20px;
        }
        .metric-box {
            background: rgba(255,153,0,0.15);
            border: 1px solid rgba(255,153,0,0.3);
            border-radius: 8px;
            padding: 15px;
            text-align: center;
        }
        .metric-box .value {
            font-size: 1.8rem;
            font-weight: bold;
            color: #ff9900;
        }
        .metric-box .label {
            font-size: 0.85rem;
            color: #8ecae6;
        }
        .dq-section {
            background: rgba(231,76,60,0.1);
            border: 1px solid rgba(231,76,60,0.3);
            border-radius: 8px;
            padding: 20px;
            margin-top: 30px;
        }
        .dq-section h3 {
            color: #e74c3c;
            margin-bottom: 15px;
        }
        .dq-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
        }
        .dq-item {
            background: rgba(231,76,60,0.05);
            border-radius: 6px;
            padding: 12px;
        }
        .dq-item strong {
            color: #e74c3c;
            display: block;
            margin-bottom: 5px;
        }
        .dq-checks {
            font-size: 0.8rem;
            color: #aaa;
        }
        @media (max-width: 768px) {
            .metrics { grid-template-columns: repeat(2, 1fr); }
            .dq-grid { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸŒ WikiStream Event Data Pipeline</h1>
        <p class="subtitle">Real-time Wikipedia Edit Stream Processing on AWS â€¢ Medallion Architecture with Data Quality Gates</p>
        
        <!-- Key Metrics -->
        <div class="metrics">
            <div class="metric-box">
                <div class="value">â‰¤30s</div>
                <div class="label">Bronze Ingestion</div>
            </div>
            <div class="metric-box">
                <div class="value">95%</div>
                <div class="label">Timeliness (&lt;1min)</div>
            </div>
            <div class="metric-box">
                <div class="value">â‰¤5min</div>
                <div class="label">End-to-End SLA</div>
            </div>
            <div class="metric-box">
                <div class="value">3</div>
                <div class="label">DQ Gates</div>
            </div>
            <div class="metric-box">
                <div class="value">24/7</div>
                <div class="label">Streaming</div>
            </div>
        </div>

        <!-- Main Architecture Diagram -->
        <div class="diagram-container">
            <div class="mermaid">
%%{init: {'theme': 'base', 'themeVariables': { 'primaryColor': '#ff9900', 'primaryTextColor': '#232f3e', 'primaryBorderColor': '#ff9900', 'lineColor': '#527fff', 'secondaryColor': '#232f3e', 'tertiaryColor': '#f5f5f5', 'background': '#ffffff'}}}%%
flowchart TB
    subgraph EXT["â˜ï¸ EXTERNAL DATA SOURCE"]
        WIKI["ğŸŒ Wikipedia EventStreams<br/><i>Server-Sent Events (SSE)</i><br/><b>stream.wikimedia.org</b>"]
    end

    subgraph VPC["ğŸ”’ AWS VPC (us-east-1)"]
        subgraph INGESTION["ğŸ“¥ DATA INGESTION"]
            ECS["ğŸ³ ECS Fargate<br/><b>Kafka Producer</b><br/><i>Python + confluent-kafka</i><br/>0.25 vCPU / 512MB"]
        end

        subgraph STREAMING["ğŸ“¡ EVENT STREAMING"]
            MSK["MSK (Kafka 3.9.x)<br/><b>KRaft Mode</b><br/><i>2x kafka.t3.small</i><br/>Topics: raw-events, dlq-events"]
        end

        subgraph PROCESSING["âš¡ DATA PROCESSING (EMR Serverless)"]
            subgraph STREAM_LAYER["ğŸ”´ STREAMING LAYER"]
                BRONZE_JOB["ğŸ¥‰ Bronze Streaming Job<br/><b>Spark Structured Streaming</b><br/><i>30s micro-batches</i><br/>Kafka â†’ Iceberg"]
            end
            
            subgraph BATCH_LAYER["ğŸ”µ BATCH LAYER (Step Functions)"]
                BRONZE_DQ["ğŸ” Bronze DQ Gate<br/><b>Deequ Checks</b><br/><i>Completeness, Timeliness</i>"]
                SILVER_JOB["ğŸ¥ˆ Silver Batch Job<br/><b>Data Cleansing</b><br/><i>Deduplication, Normalization</i>"]
                SILVER_DQ["ğŸ” Silver DQ Gate<br/><b>Deequ Checks</b><br/><i>Accuracy, Drift Detection</i>"]
                GOLD_JOB["ğŸ¥‡ Gold Batch Job<br/><b>Aggregations</b><br/><i>Hourly Stats, Entity Trends</i>"]
                GOLD_DQ["ğŸ” Gold DQ Gate<br/><b>Deequ Checks</b><br/><i>Validation, Consistency</i>"]
            end
        end
    end

    subgraph STORAGE["ğŸ’¾ DATA LAKE STORAGE"]
        subgraph S3TABLES["ğŸ“Š S3 Tables (Apache Iceberg)"]
            BRONZE_TBL["ğŸ¥‰ bronze.raw_events<br/><i>Raw ingested events</i><br/>Partitioned by date/hour"]
            SILVER_TBL["ğŸ¥ˆ silver.cleaned_events<br/><i>Deduplicated & normalized</i>"]
            GOLD_TBL["ğŸ¥‡ gold.*<br/><i>hourly_stats</i><br/><i>entity_trends</i><br/><i>risk_scores</i>"]
            DQ_AUDIT["ğŸ“‹ dq_audit.*<br/><i>quality_results</i><br/><i>profile_metrics</i>"]
        end
        
        S3["ğŸ“¦ S3 Bucket<br/><i>Checkpoints, Logs</i><br/><i>Spark Jobs (.py)</i>"]
    end

    subgraph MONITORING["ğŸ“ˆ MONITORING & ORCHESTRATION"]
        SFN["âš™ï¸ Step Functions<br/><b>Batch Pipeline</b><br/><i>Bronze DQ â†’ Silver â†’ Silver DQ â†’ Gold â†’ Gold DQ</i>"]
        CW["ğŸ“Š CloudWatch<br/><i>Metrics, Logs, Dashboard</i><br/><i>DQ Alarms</i>"]
        SNS["ğŸ“§ SNS<br/><i>DQ Failure Alerts</i><br/><i>Drift Notifications</i>"]
        LAMBDA["Î» Lambda<br/><b>Auto-Restart</b><br/><i>Bronze Job Recovery</i>"]
        EB["â° EventBridge<br/><i>Every 5 min Trigger</i>"]
        GRAFANA["ğŸ“Š Grafana<br/><i>Local Dashboard</i><br/><i>CloudWatch Integration</i>"]
    end

    subgraph DEVOPS["ğŸ› ï¸ INFRASTRUCTURE"]
        TF["ğŸ—ï¸ Terraform<br/><i>Infrastructure as Code</i>"]
        ECR["ğŸ“¦ ECR<br/><i>Docker Images</i>"]
    end

    %% Data Flow
    WIKI -->|"SSE Stream"| ECS
    ECS -->|"IAM Auth"| MSK
    MSK -->|"raw-events topic"| BRONZE_JOB
    
    BRONZE_JOB -->|"MERGE INTO"| BRONZE_TBL
    BRONZE_JOB -->|"Checkpoints"| S3
    
    BRONZE_TBL -->|"Validate"| BRONZE_DQ
    BRONZE_DQ -->|"Pass âœ…"| SILVER_JOB
    BRONZE_DQ -->|"Audit"| DQ_AUDIT
    
    BRONZE_TBL -->|"Read"| SILVER_JOB
    SILVER_JOB -->|"Write"| SILVER_TBL
    
    SILVER_TBL -->|"Validate"| SILVER_DQ
    SILVER_DQ -->|"Audit"| DQ_AUDIT
    SILVER_DQ -->|"Pass âœ…"| GOLD_JOB
    
    SILVER_TBL -->|"Read"| GOLD_JOB
    GOLD_JOB -->|"Write"| GOLD_TBL
    
    GOLD_TBL -->|"Validate"| GOLD_DQ
    GOLD_DQ -->|"Audit"| DQ_AUDIT
    
    %% Orchestration
    EB -->|"Schedule"| SFN
    SFN -->|"1. Trigger"| BRONZE_DQ
    SFN -->|"2. Trigger"| SILVER_JOB
    SFN -->|"3. Trigger"| SILVER_DQ
    SFN -->|"4. Trigger"| GOLD_JOB
    SFN -->|"5. Trigger"| GOLD_DQ
    
    %% Monitoring
    BRONZE_JOB -->|"Metrics"| CW
    CW -->|"Alarm"| LAMBDA
    LAMBDA -->|"Restart"| BRONZE_JOB
    
    %% DQ Alerts
    BRONZE_DQ -->|"Fail âŒ"| SNS
    SILVER_DQ -->|"Fail âŒ"| SNS
    GOLD_DQ -->|"Fail âŒ"| SNS
    SILVER_DQ -->|"Drift âš ï¸"| SNS
    
    %% Grafana
    CW -->|"Metrics"| GRAFANA
    
    %% DevOps
    TF -->|"Provision"| VPC
    ECR -->|"Pull Image"| ECS

    %% Styling
    classDef external fill:#e8f4f8,stroke:#0073bb,stroke-width:2px
    classDef ingestion fill:#fef3e2,stroke:#ff9900,stroke-width:2px
    classDef streaming fill:#e8f5e9,stroke:#2e7d32,stroke-width:2px
    classDef processing fill:#fff3e0,stroke:#f57c00,stroke-width:2px
    classDef dqgate fill:#ffebee,stroke:#c62828,stroke-width:2px
    classDef storage fill:#e3f2fd,stroke:#1976d2,stroke-width:2px
    classDef monitoring fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px
    classDef devops fill:#eceff1,stroke:#546e7a,stroke-width:2px
    
    class WIKI external
    class ECS ingestion
    class MSK streaming
    class BRONZE_JOB,SILVER_JOB,GOLD_JOB processing
    class BRONZE_DQ,SILVER_DQ,GOLD_DQ dqgate
    class BRONZE_TBL,SILVER_TBL,GOLD_TBL,DQ_AUDIT,S3 storage
    class SFN,CW,SNS,LAMBDA,EB,GRAFANA monitoring
    class TF,ECR devops
            </div>
        </div>

        <!-- DQ Gates Section -->
        <div class="dq-section">
            <h3>ğŸ” Data Quality Gates (Deequ-based)</h3>
            <div class="dq-grid">
                <div class="dq-item">
                    <strong>ğŸ¥‰ Bronze DQ Gate</strong>
                    <div class="dq-checks">
                        âœ“ Completeness: event_id, event_type, domain, timestamp (100%)<br/>
                        âœ“ Timeliness: 95% events within 1 minute<br/>
                        âœ“ Validity: event_type in allowed set<br/>
                        âœ“ Uniqueness: event_id within batch<br/>
                        <b>Blocks Silver if fails</b>
                    </div>
                </div>
                <div class="dq-item">
                    <strong>ğŸ¥ˆ Silver DQ Gate</strong>
                    <div class="dq-checks">
                        âœ“ Accuracy: length_delta calculation (99%)<br/>
                        âœ“ Accuracy: is_anonymous derivation (99%)<br/>
                        âœ“ Accuracy: region mapping (100%)<br/>
                        âœ“ Consistency: is_valid flag<br/>
                        âœ“ Drift: 7-day baseline comparison<br/>
                        <b>Blocks Gold if fails</b>
                    </div>
                </div>
                <div class="dq-item">
                    <strong>ğŸ¥‡ Gold DQ Gate</strong>
                    <div class="dq-checks">
                        âœ“ Upstream: Bronze & Silver gates passed<br/>
                        âœ“ Consistency: total_events >= unique_users<br/>
                        âœ“ Validity: bot_percentage in 0-100<br/>
                        âœ“ Validity: risk_score in 0-100<br/>
                        âœ“ Completeness: required aggregation fields<br/>
                        <b>Alerts on failure</b>
                    </div>
                </div>
            </div>
        </div>

        <!-- Legend -->
        <div class="legend">
            <div class="legend-section">
                <h3>ğŸ“¥ Data Ingestion Layer</h3>
                <div class="legend-item">
                    <span class="icon">ğŸŒ</span>
                    <div>
                        <strong>Wikipedia EventStreams</strong> <span class="status status-live">LIVE</span><br/>
                        Real-time SSE feed of all Wikipedia edits across multiple wikis
                    </div>
                </div>
                <div class="legend-item">
                    <span class="icon">ğŸ³</span>
                    <div>
                        <strong>ECS Fargate Producer</strong> <span class="status status-implemented">IMPLEMENTED</span><br/>
                        Python service consuming SSE, producing to Kafka with IAM auth
                    </div>
                </div>
                <div class="legend-item">
                    <span class="icon">ğŸ“¡</span>
                    <div>
                        <strong>Amazon MSK (KRaft)</strong> <span class="status status-implemented">IMPLEMENTED</span><br/>
                        Kafka 3.9.x cluster, topics: raw-events (main), dlq-events (dead letter)
                    </div>
                </div>
            </div>

            <div class="legend-section">
                <h3>âš¡ Processing Layer (EMR Serverless)</h3>
                <div class="legend-item">
                    <span class="icon">ğŸ¥‰</span>
                    <div>
                        <strong>Bronze Streaming Job</strong> <span class="status status-implemented">IMPLEMENTED</span><br/>
                        Spark Structured Streaming, 30s micro-batches, MERGE INTO Iceberg
                    </div>
                </div>
                <div class="legend-item">
                    <span class="icon">ğŸ”</span>
                    <div>
                        <strong>Bronze DQ Gate</strong> <span class="status status-dq">DQ GATE</span><br/>
                        Completeness, timeliness, validity, uniqueness checks
                    </div>
                </div>
                <div class="legend-item">
                    <span class="icon">ğŸ¥ˆ</span>
                    <div>
                        <strong>Silver Batch Job</strong> <span class="status status-implemented">IMPLEMENTED</span><br/>
                        Deduplication, normalization, data type standardization
                    </div>
                </div>
                <div class="legend-item">
                    <span class="icon">ğŸ”</span>
                    <div>
                        <strong>Silver DQ Gate</strong> <span class="status status-dq">DQ GATE</span><br/>
                        Accuracy, consistency, uniqueness, drift detection
                    </div>
                </div>
                <div class="legend-item">
                    <span class="icon">ğŸ¥‡</span>
                    <div>
                        <strong>Gold Batch Job</strong> <span class="status status-implemented">IMPLEMENTED</span><br/>
                        Aggregations: hourly_stats, entity_trends, risk_scores
                    </div>
                </div>
                <div class="legend-item">
                    <span class="icon">ğŸ”</span>
                    <div>
                        <strong>Gold DQ Gate</strong> <span class="status status-dq">DQ GATE</span><br/>
                        Upstream verification, validation, consistency checks
                    </div>
                </div>
            </div>

            <div class="legend-section">
                <h3>ğŸ’¾ Storage Layer</h3>
                <div class="legend-item">
                    <span class="icon">ğŸ“Š</span>
                    <div>
                        <strong>S3 Tables (Apache Iceberg)</strong> <span class="status status-implemented">IMPLEMENTED</span><br/>
                        Managed Iceberg tables with ACID transactions, time travel, schema evolution
                    </div>
                </div>
                <div class="legend-item">
                    <span class="icon">ğŸ“‹</span>
                    <div>
                        <strong>dq_audit Namespace</strong> <span class="status status-implemented">IMPLEMENTED</span><br/>
                        Quality results and profile metrics for audit trail
                    </div>
                </div>
                <div class="legend-item">
                    <span class="icon">ğŸ“¦</span>
                    <div>
                        <strong>S3 Bucket</strong> <span class="status status-implemented">IMPLEMENTED</span><br/>
                        Spark checkpoints, EMR logs, job artifacts (.py files)
                    </div>
                </div>
            </div>

            <div class="legend-section">
                <h3>ğŸ“ˆ Orchestration & Monitoring</h3>
                <div class="legend-item">
                    <span class="icon">âš™ï¸</span>
                    <div>
                        <strong>Step Functions</strong> <span class="status status-implemented">IMPLEMENTED</span><br/>
                        Unified batch pipeline: Bronze DQ â†’ Silver â†’ Silver DQ â†’ Gold â†’ Gold DQ
                    </div>
                </div>
                <div class="legend-item">
                    <span class="icon">â°</span>
                    <div>
                        <strong>EventBridge</strong> <span class="status status-implemented">IMPLEMENTED</span><br/>
                        Scheduled triggers for batch pipeline (every 5 minutes)
                    </div>
                </div>
                <div class="legend-item">
                    <span class="icon">Î»</span>
                    <div>
                        <strong>Lambda Auto-Restart</strong> <span class="status status-auto">AUTO-RECOVERY</span><br/>
                        Automatically restarts Bronze job on health check failure
                    </div>
                </div>
                <div class="legend-item">
                    <span class="icon">ğŸ“§</span>
                    <div>
                        <strong>SNS Alerts</strong> <span class="status status-implemented">IMPLEMENTED</span><br/>
                        DQ gate failures, drift detection, pipeline errors â†’ email
                    </div>
                </div>
                <div class="legend-item">
                    <span class="icon">ğŸ“Š</span>
                    <div>
                        <strong>CloudWatch Dashboard</strong> <span class="status status-implemented">IMPLEMENTED</span><br/>
                        Pipeline health, DQ metrics, alarms, log aggregation
                    </div>
                </div>
                <div class="legend-item">
                    <span class="icon">ğŸ“Š</span>
                    <div>
                        <strong>Grafana (Local)</strong> <span class="status status-implemented">IMPLEMENTED</span><br/>
                        Dockerized operational dashboard with CloudWatch integration
                    </div>
                </div>
            </div>
        </div>

        <!-- Tech Stack -->
        <div class="tech-stack">
            <h3>ğŸ”§ Technology Stack</h3>
            <div class="tech-grid">
                <div class="tech-item">
                    <strong>Compute</strong>
                    <span>EMR Serverless (Spark 3.5), ECS Fargate, Lambda</span>
                </div>
                <div class="tech-item">
                    <strong>Streaming</strong>
                    <span>Amazon MSK (Kafka 3.9.x, KRaft mode)</span>
                </div>
                <div class="tech-item">
                    <strong>Table Format</strong>
                    <span>Apache Iceberg 1.10.0 via S3 Tables</span>
                </div>
                <div class="tech-item">
                    <strong>Data Quality</strong>
                    <span>AWS Deequ 2.0.7 (Spark-native)</span>
                </div>
                <div class="tech-item">
                    <strong>Languages</strong>
                    <span>Python 3.12, PySpark, SQL</span>
                </div>
                <div class="tech-item">
                    <strong>Infrastructure</strong>
                    <span>Terraform 1.6+, AWS Provider 5.80</span>
                </div>
                <div class="tech-item">
                    <strong>Orchestration</strong>
                    <span>Step Functions, EventBridge</span>
                </div>
                <div class="tech-item">
                    <strong>Monitoring</strong>
                    <span>CloudWatch, Grafana, SNS</span>
                </div>
            </div>
        </div>

        <!-- Data Flow Summary -->
        <div class="legend-section" style="margin-top: 30px;">
            <h3>ğŸ”„ Data Flow Summary with DQ Gates</h3>
            <div style="font-family: monospace; background: #1a1a2e; padding: 20px; border-radius: 8px; overflow-x: auto;">
                <pre style="color: #8ecae6; margin: 0;">
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Wikipedia      â”‚     â”‚   Amazon     â”‚     â”‚                  EMR Serverless (Spark)                             â”‚
â”‚  EventStreams    â”‚â”€â”€â”€â”€â–¶â”‚     MSK      â”‚â”€â”€â”€â”€â–¶â”‚                                                                     â”‚
â”‚   (SSE Feed)     â”‚     â”‚  (Kafka)     â”‚     â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚  â”‚ Bronze  â”‚   â”‚ Bronze   â”‚   â”‚ Silver  â”‚   â”‚ Silver   â”‚           â”‚
        â”‚                       â”‚             â”‚  â”‚Streamingâ”‚â”€â”€â–¶â”‚ DQ Gate  â”‚â”€â”€â–¶â”‚  Batch  â”‚â”€â”€â–¶â”‚ DQ Gate  â”‚           â”‚
        â”‚                       â”‚             â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜   â”‚ (Deequ)  â”‚   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜   â”‚ (Deequ)  â”‚           â”‚
        â–¼                       â–¼             â”‚       â”‚        â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜        â”‚        â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜           â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚       â”‚             â”‚ âœ…Pass       â”‚             â”‚ âœ…Pass           â”‚
â”‚   ECS Fargate    â”‚     â”‚   raw-events â”‚     â”‚       â”‚             â”‚              â”‚             â”‚                  â”‚
â”‚  Kafka Producer  â”‚â”€â”€â”€â”€â–¶â”‚  dlq-events  â”‚     â”‚       â”‚        âŒFailâ”€â”€â”€â”€â”€â–¶SNS     â”‚        âŒFailâ”€â”€â”€â”€â”€â”€â–¶SNS        â”‚
â”‚  (Python/SSE)    â”‚     â”‚   (Topics)   â”‚     â”‚       â”‚                            â”‚                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚       â”‚        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                               â”‚
                                              â”‚       â”‚        â”‚                                                    â”‚
                                              â”‚       â”‚        â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
                                              â”‚       â”‚        â””â”€â”€â–¶â”‚  Gold   â”‚â”€â”€â–¶â”‚  Gold    â”‚                      â”‚
                                              â”‚       â”‚            â”‚  Batch  â”‚   â”‚ DQ Gate  â”‚                      â”‚
                                              â”‚       â”‚            â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜   â”‚ (Deequ)  â”‚                      â”‚
                                              â”‚       â”‚                 â”‚        â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                      â”‚
                                              â”‚       â”‚                 â”‚             â”‚ âœ…Pass/âŒFailâ”€â”€â–¶SNS         â”‚
                                              â”‚       â”‚                 â”‚             â”‚                            â”‚
                                              â””â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                      â”‚                 â”‚             â”‚
                                                      â–¼                 â–¼             â–¼
                                           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                           â”‚                   S3 Tables (Apache Iceberg)                            â”‚
                                           â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
                                           â”‚  â”‚  bronze   â”‚  silver   â”‚   gold    â”‚   dq_audit   â”‚                   â”‚
                                           â”‚  â”‚  .raw_    â”‚ .cleaned_ â”‚ .hourly_  â”‚  .quality_   â”‚                   â”‚
                                           â”‚  â”‚  events   â”‚  events   â”‚  stats    â”‚   results    â”‚                   â”‚
                                           â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
                                           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                </pre>
            </div>
        </div>

        <!-- Footer -->
        <div style="text-align: center; margin-top: 40px; padding: 20px; border-top: 1px solid rgba(255,153,0,0.3);">
            <p style="color: #888;">WikiStream Pipeline v2.0 â€¢ Built with AWS Serverless Technologies</p>
            <p style="color: #666; font-size: 0.85rem;">All components including Data Quality Gates implemented and operational âœ“</p>
        </div>
    </div>

    <script>
        mermaid.initialize({ 
            startOnLoad: true,
            theme: 'base',
            flowchart: {
                useMaxWidth: true,
                htmlLabels: true,
                curve: 'basis'
            }
        });
    </script>
</body>
</html>
