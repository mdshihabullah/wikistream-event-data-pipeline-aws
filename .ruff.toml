# Ruff configuration for WikiStream project
# Reference: https://docs.astronomer.io/learn/ruff-linting

line-length = 100
target-version = "py311"

[lint]
# Enable all rules by default, then selectively disable
select = [
    "E",   # pycodestyle errors
    "W",   # pycodestyle warnings
    "F",   # Pyflakes
    "I",   # isort
    "B",   # flake8-bugbear
    "C4",  # flake8-comprehensions
    "UP",  # pyupgrade
    "ARG", # flake8-unused-arguments
    "SIM", # flake8-simplify
    "TCH", # flake8-type-checking
]

# Ignore specific rules that may not apply to Spark/producer code
ignore = [
    "E501",    # Line too long (handled by line-length config)
    "B008",    # Do not perform function calls in argument defaults (common in Spark)
    "B904",    # Use raise from in except blocks
    "ARG001",  # Unused function argument (common in Spark UDFs)
    "ARG002",  # Unused method argument (common in Spark UDFs)
    "TCH001",  # Type checking block requires typing import
    "TCH002",  # Type checking block requires typing_extensions import
    "TCH003",  # Type checking block requires third-party import
]

[lint.per-file-ignores]
# Spark jobs may have specific patterns
"spark/**/*.py" = [
    "F401",    # Unused imports (common in Spark for types)
    "F841",    # Local variable assigned but never used (common in Spark transformations)
]

# __init__.py files
"__init__.py" = [
    "F401",    # Unused imports in __init__.py (exports)
]

[format]
# Use double quotes for strings
quote-style = "double"

# Indent with spaces
indent-style = "space"

# Line ending style
line-ending = "auto"

[isort]
# Sort imports alphabetically
case-sensitive = true
